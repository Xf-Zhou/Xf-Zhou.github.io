<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="xfzhou"><meta name="copyright" content="xfzhou"><meta name="generator" content="Hexo 4.2.1"><meta name="theme" content="hexo-theme-yun"><title>JavaWeb | 恍惚斋</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;family=Source+Code+Pro&amp;display=swap" media="none" onload="this.media='all'"><script src="//at.alicdn.com/t/font_1140697_pem9yni52s.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"root":"/","title":"恍惚斋","version":"0.9.0","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["104, 100, 189","93, 175, 189","11, 163, 42"]}};
  </script><meta name="description" content="JavaWeb1、基本概念1.1、前言web开发  web ，网页， 譬如www.baidu.com 静态web html ，css 提供给所有人看的数据始终不会发生变化！   动态web 淘宝，几乎所有的网站 提供给所有人看的数据始终会发生变化，每个人在不同的时间，不同的地点看到的信息各不相同！ 技术栈：Servlet&#x2F;JSP，ASP，PHP    在java中，动态web资源开发的技术统称为j">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb">
<meta property="og:url" content="https://xfzhou95.com/2020/11/27/JavaWeb/index.html">
<meta property="og:site_name" content="恍惚斋">
<meta property="og:description" content="JavaWeb1、基本概念1.1、前言web开发  web ，网页， 譬如www.baidu.com 静态web html ，css 提供给所有人看的数据始终不会发生变化！   动态web 淘宝，几乎所有的网站 提供给所有人看的数据始终会发生变化，每个人在不同的时间，不同的地点看到的信息各不相同！ 技术栈：Servlet&#x2F;JSP，ASP，PHP    在java中，动态web资源开发的技术统称为j">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127222501192.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127231511436.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127231722509.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127234105559.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127234803186.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127234927787.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127235127003.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128001724954.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128143531088.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128145212492.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128155920684.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128160146942.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128160234623.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128160404146.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128160700639.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128150948873.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128161811415.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128173519871.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128161724742.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128162024358.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128173828919.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128174021920.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128174240047.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128174333041.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128174553589.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128174842716.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128175226936.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128175328127.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128194702164.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128194617356.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128232839747.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210107224237329.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128233441044.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201128233305371.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201231201523135.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201231202000213.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201231203300379.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201231203411538.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201231203513113.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210107000721950.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210107140913751.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210107190507482.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108113105081.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108133248506.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108165953310.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108170149748.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108180808757.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108180849976.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210108181034646.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111200748405.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111200941008.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111181157875.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111201101517.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111201939244.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111202539015.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111204227628.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111205614100.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111210443225.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210111210655860.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210112195723228.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210114231018450.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210114233017025.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210117150922513.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210117151753341.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210117153030831.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20210117154227352.png">
<meta property="og:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/x.jpg">
<meta property="article:published_time" content="2020-11-27T13:30:52.165Z">
<meta property="article:modified_time" content="2021-02-03T13:25:25.783Z">
<meta property="article:author" content="xfzhou">
<meta property="article:tag" content="Web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xfzhou95.com/2020/11/27/JavaWeb/JavaWeb.assets/image-20201127222501192.png"><script src="/js/ui/mode.js"></script><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle sidebar-toggle-fixed hty-icon-button"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><aside class="sidebar"><script defer src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="xfzhou"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="xfzhou"></a><div class="site-author-name"><a href="/about/">xfzhou</a></div><a class="site-name" href="/about/site.html">恍惚斋</a><sub class="site-subtitle"></sub><div class="site-desciption">面壁十年图破壁</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">43</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">3</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">18</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="留言板"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Xf-Zhou" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:2102813085@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaWeb"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、基本概念"><span class="toc-number">1.1.</span> <span class="toc-text">1、基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1、前言"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1、前言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2、web应用程序"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2、web应用程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3、静态web"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3、静态web</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4、动态web"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4、动态web</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、web服务器"><span class="toc-number">1.2.</span> <span class="toc-text">2、web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1、技术讲解"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1、技术讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2、web服务器"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2、web服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、Tomcat"><span class="toc-number">1.3.</span> <span class="toc-text">3、Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1、安装tomcat"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1、安装tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2、tomcat启动和配置"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2、tomcat启动和配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3、配置"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3、配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4、发布一个web网站"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4、发布一个web网站</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、Http"><span class="toc-number">1.4.</span> <span class="toc-text">4、Http</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1、什么是http？"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1、什么是http？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2、两个时代"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2、两个时代</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3、http请求"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3、http请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4、http响应"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4、http响应</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、Maven"><span class="toc-number">1.5.</span> <span class="toc-text">5、Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1、Maven项目架构管理工具"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1、Maven项目架构管理工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2、下载安装Maven（3-6-3与IDEA不兼容，坑死我了！！！最后换成了3-6-1）"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2、下载安装Maven（3.6.3与IDEA不兼容，坑死我了！！！最后换成了3.6.1）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3、环境变量配置"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3、环境变量配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4、阿里云镜像"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4、阿里云镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5、本地仓库"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.5、本地仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6、在IDEA中使用Maven"><span class="toc-number">1.5.6.</span> <span class="toc-text">5.6、在IDEA中使用Maven</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-7、创建一个普通的Maven项目"><span class="toc-number">1.5.7.</span> <span class="toc-text">5.7、创建一个普通的Maven项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-8、标记文件夹功能"><span class="toc-number">1.5.8.</span> <span class="toc-text">5.8、标记文件夹功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9、在IDEA中配置Tomcat"><span class="toc-number">1.5.9.</span> <span class="toc-text">5.9、在IDEA中配置Tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-10、pom文件"><span class="toc-number">1.5.10.</span> <span class="toc-text">5.10、pom文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-11IDEA操作"><span class="toc-number">1.5.11.</span> <span class="toc-text">5.11IDEA操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-12解决遇到的问题"><span class="toc-number">1.5.12.</span> <span class="toc-text">5.12解决遇到的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、Servlet"><span class="toc-number">1.6.</span> <span class="toc-text">6、Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1、Servlet简介"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1、Servlet简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2、HelloServlet"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2、HelloServlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3、Servlet原理"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3、Servlet原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4、Mapping问题"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.4、Mapping问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5、ServletContext"><span class="toc-number">1.6.5.</span> <span class="toc-text">6.5、ServletContext</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1、共享数据"><span class="toc-number">1.6.5.1.</span> <span class="toc-text">1、共享数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2、获取初始化参数"><span class="toc-number">1.6.5.2.</span> <span class="toc-text">2、获取初始化参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3、请求转发（注意和重定向的区别）"><span class="toc-number">1.6.5.3.</span> <span class="toc-text">3、请求转发（注意和重定向的区别）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4、读取资源文件"><span class="toc-number">1.6.5.4.</span> <span class="toc-text">4、读取资源文件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6、HttpServletResponse"><span class="toc-number">1.6.6.</span> <span class="toc-text">6.6、HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1、简单分类"><span class="toc-number">1.6.6.1.</span> <span class="toc-text">1、简单分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2、常见应用"><span class="toc-number">1.6.6.2.</span> <span class="toc-text">2、常见应用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3、验证码功能"><span class="toc-number">1.6.6.3.</span> <span class="toc-text">3、验证码功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4、实现重定向"><span class="toc-number">1.6.6.4.</span> <span class="toc-text">4、实现重定向</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7、HttpServletRequest"><span class="toc-number">1.6.7.</span> <span class="toc-text">6.7、HttpServletRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1、获取参数，请求转发"><span class="toc-number">1.6.7.1.</span> <span class="toc-text">1、获取参数，请求转发</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7、Cookie、Session"><span class="toc-number">1.7.</span> <span class="toc-text">7、Cookie、Session</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1、会话"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1、会话</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2、保存会话的两种技术"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2、保存会话的两种技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3、Cookie"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3、Cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4、Session（重点）"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4、Session（重点）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8、JSP"><span class="toc-number">1.8.</span> <span class="toc-text">8、JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1、什么是JSP"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1、什么是JSP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2、JSP原理"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2、JSP原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3、JSP基础语法"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3、JSP基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#JSP表达式"><span class="toc-number">1.8.3.1.</span> <span class="toc-text">JSP表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JSP脚本片段"><span class="toc-number">1.8.3.2.</span> <span class="toc-text">JSP脚本片段</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number"></span> <span class="toc-text">Hello,World </span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#JSP声明"><span class="toc-number">0.0.0.1.</span> <span class="toc-text">JSP声明</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4、JSP指令"><span class="toc-number">0.0.1.</span> <span class="toc-text">8.4、JSP指令</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number"></span> <span class="toc-text">网页主体</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number"></span> <span class="toc-text">网页主体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5、9大内置对象"><span class="toc-number">0.0.1.</span> <span class="toc-text">8.5、9大内置对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-6、JSP标签、JSTL标签、EL表达式"><span class="toc-number">0.0.2.</span> <span class="toc-text">8.6、JSP标签、JSTL标签、EL表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#"><span class="toc-number">0.0.3.</span> <span class="toc-text">if测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9、JavaBean"><span class="toc-number">0.1.</span> <span class="toc-text">9、JavaBean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10、MVC三层架构"><span class="toc-number">0.2.</span> <span class="toc-text">10、MVC三层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1、早些年"><span class="toc-number">0.2.1.</span> <span class="toc-text">10.1、早些年</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2、MVC三层架构"><span class="toc-number">0.2.2.</span> <span class="toc-text">10.2、MVC三层架构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11、Filter（重点）"><span class="toc-number">0.3.</span> <span class="toc-text">11、Filter（重点）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12、监听器"><span class="toc-number">0.4.</span> <span class="toc-text">12、监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13、过滤器、监听器常见应用"><span class="toc-number">0.5.</span> <span class="toc-text">13、过滤器、监听器常见应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number"></span> <span class="toc-text">登录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number"></span> <span class="toc-text">主页</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number"></span> <span class="toc-text">错误</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#"><span class="toc-number">0.1.</span> <span class="toc-text">没有权限，用户名错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14、JDBC"><span class="toc-number">0.2.</span> <span class="toc-text">14、JDBC</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://xfzhou95.com/2020/11/27/JavaWeb/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="xfzhou"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="恍惚斋"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">JavaWeb<a class="post-edit-link" href="https://github.com/Xf-Zhou/Xf-Zhou.github.io/tree/hexo/source/_posts/JavaWeb.md" target="_blank" title="编辑" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2020-11-27 21:30:52" itemprop="dateCreated datePublished" datetime="2020-11-27T21:30:52+08:00">2020-11-27</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2021-02-03 21:25:25" itemprop="dateModified" datetime="2021-02-03T21:25:25+08:00">2021-02-03</time></div><span class="leancloud_visitors" id="/2020/11/27/JavaWeb/" data-flag-title="JavaWeb"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-category"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/Java/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Java</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/Web/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Web</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content post-markdown"><h2 id="JavaWeb"><a href="#JavaWeb" class="headerlink" title="JavaWeb"></a>JavaWeb</h2><h3 id="1、基本概念"><a href="#1、基本概念" class="headerlink" title="1、基本概念"></a>1、基本概念</h3><h4 id="1-1、前言"><a href="#1-1、前言" class="headerlink" title="1.1、前言"></a>1.1、前言</h4><p>web开发</p>
<ul>
<li>web ，网页， 譬如<a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a></li>
<li>静态web<ul>
<li>html ，css</li>
<li>提供给所有人看的数据始终不会发生变化！</li>
</ul>
</li>
<li>动态web<ul>
<li>淘宝，几乎所有的网站</li>
<li>提供给所有人看的数据始终会发生变化，每个人在不同的时间，不同的地点看到的信息各不相同！</li>
<li>技术栈：Servlet/JSP，ASP，PHP</li>
</ul>
</li>
</ul>
<p>在java中，动态web资源开发的技术统称为javaWeb；</p>
<h4 id="1-2、web应用程序"><a href="#1-2、web应用程序" class="headerlink" title="1.2、web应用程序"></a>1.2、web应用程序</h4><p>web应用程度：可以提供浏览器访问的程序；</p>
<ul>
<li>a.html、b.html……多个web资源，这些web资源可以被外界访问，对外界提供服务；</li>
<li>你们能访问到的任何一个页面，都存在世界上某一个角落的计算机上。</li>
<li>URL</li>
<li>这个统一的web资源会被放在同一个文件夹下，web应用程序–》Tomcat：服务器</li>
<li>一个web应用由多部分组成（静态web，动态web）<ul>
<li>html，css，js</li>
<li>jsp，servlet</li>
<li>java程序</li>
<li>jar包</li>
<li>配置文件（properties）</li>
</ul>
</li>
</ul>
<h4 id="1-3、静态web"><a href="#1-3、静态web" class="headerlink" title="1.3、静态web"></a>1.3、静态web</h4><ul>
<li>*.htm, *.html 都是网页的后缀，如果服务器上一直存在这些东西，我们就可以直接进行读取，通信。</li>
</ul>
<p><img src="JavaWeb.assets/image-20201127222501192.png" alt="image-20201127222501192" loading="lazy"></p>
<ul>
<li>静态web存在的缺点<ul>
<li>web页面无法动态更新，所有用户看到都是同一个页面<ul>
<li>轮播图，点击特效：伪动态</li>
<li>JavaScript（实际开发中，它用得最多）</li>
<li>VBScript</li>
</ul>
</li>
<li>它无法和数据库交互（数据无法持久化，用户无法交互）</li>
</ul>
</li>
</ul>
<h4 id="1-4、动态web"><a href="#1-4、动态web" class="headerlink" title="1.4、动态web"></a>1.4、动态web</h4><p>页面动态展示：“web的页面展示的效果因人而异”。</p>
<p><img src="JavaWeb.assets/image-20201127231511436.png" alt="image-20201127231511436" loading="lazy"></p>
<p>缺点</p>
<ul>
<li>加入服务器的动态web资源出现了错误，我们需要重新编写我们的<strong>后台程序</strong>，重新发布；<ul>
<li>停机维护</li>
</ul>
</li>
</ul>
<p>优点</p>
<ul>
<li>web页面可以动态更新，所有用户看到都不是同一个页面</li>
<li>它可以和数据库交互（数据持久化：注册，商品信息，用户信息……）</li>
</ul>
<p><img src="JavaWeb.assets/image-20201127231722509.png" alt="image-20201127231722509" loading="lazy"></p>
<h3 id="2、web服务器"><a href="#2、web服务器" class="headerlink" title="2、web服务器"></a>2、web服务器</h3><h4 id="2-1、技术讲解"><a href="#2-1、技术讲解" class="headerlink" title="2.1、技术讲解"></a>2.1、技术讲解</h4><p><strong>ASP：</strong></p>
<ul>
<li><p>微软，国内最高流行的就是ASP；</p>
</li>
<li><p>HTML中嵌入了VB的脚本，ASP+COM；</p>
</li>
<li><p>在ASP开发中，基本页面都有几千行的业务代码，页面极其混乱，维护成本高</p>
</li>
<li><p>C#  IIS</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
            &lt;%
               System.out.println("hello world")
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>%</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre>
</li>
</ul>
<p><strong>php</strong></p>
<ul>
<li>PHP开发速度很快，功能很强大，跨平台，代码简单；</li>
<li>无法承载大访问量的情况（局限性）</li>
</ul>
<p><strong>JSP/Servlet：</strong></p>
<ul>
<li>sun公司主推的B/S架构（浏览器和服务器）</li>
<li>基于Java语言的（所有的大公司，或者一些开源的组件，都是用Java写的）</li>
<li>可以承载三高问题带来的影响；</li>
<li>语法像ASP；</li>
</ul>
<p>……</p>
<h4 id="2-2、web服务器"><a href="#2-2、web服务器" class="headerlink" title="2.2、web服务器"></a>2.2、web服务器</h4><p>服务器是一种被动的操作，用来处理用户的一些请求和给用户一些响应信息。</p>
<p><strong>IIS</strong></p>
<p>微软的；ASP……；Windows中自带</p>
<p><strong>Tomcat</strong></p>
<blockquote>
<p>Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现。因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p>
<p>Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用<a href="https://baike.baidu.com/item/服务器" target="_blank" rel="noopener">服务器</a>，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。Tomcat 实际上运行JSP 页面和Servlet。目前Tomcat最新版本为9.0.37<strong>。</strong></p>
</blockquote>
<h3 id="3、Tomcat"><a href="#3、Tomcat" class="headerlink" title="3、Tomcat"></a>3、Tomcat</h3><h4 id="3-1、安装tomcat"><a href="#3-1、安装tomcat" class="headerlink" title="3.1、安装tomcat"></a>3.1、安装tomcat</h4><p><a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a></p>
<p><img src="JavaWeb.assets/image-20201127234105559.png" alt="image-20201127234105559" loading="lazy"></p>
<h4 id="3-2、tomcat启动和配置"><a href="#3-2、tomcat启动和配置" class="headerlink" title="3.2、tomcat启动和配置"></a>3.2、tomcat启动和配置</h4><p>文件夹作用：</p>
<p><img src="JavaWeb.assets/image-20201127234803186.png" alt="image-20201127234803186" loading="lazy"></p>
<p><strong>启动和关闭</strong></p>
<p><img src="JavaWeb.assets/image-20201127234927787.png" alt="image-20201127234927787" loading="lazy"></p>
<p>访问测试：<a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></p>
<h4 id="3-3、配置"><a href="#3-3、配置" class="headerlink" title="3.3、配置"></a>3.3、配置</h4><p><img src="JavaWeb.assets/image-20201127235127003.png" alt="image-20201127235127003" loading="lazy"></p>
<p>可以配置启动的端口号</p>
<ul>
<li>tomcat的默认端口号：8080</li>
<li>MySQL的默认端口号：3306</li>
<li>http：80</li>
<li>https：443</li>
</ul>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8080<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>HTTP/1.1<span class="token punctuation">"</span></span>
           <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span>
           <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
<p>可以配置主机的名称</p>
<ul>
<li>默认的主机名为：localhost—&gt;127.0.0.1</li>
<li>默认网站应用存放的位置为：webapps</li>
</ul>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>localhost<span class="token punctuation">"</span></span>  <span class="token attr-name">appBase</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>webapps<span class="token punctuation">"</span></span>
      <span class="token attr-name">unpackWARs</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">autoDeploy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
<p><strong>面试题：</strong></p>
<p>请你谈谈网站是如何访问的？</p>
<ol>
<li><p>输入一个域名，回车</p>
</li>
<li><p>检查本机的C:Windows\System32\drivers\etc\hosts配置文件下有没有这个域名映射;</p>
<ol>
<li><p>有：直接返回对应的ip地址，这个地址中，有我们需要访问的web程序，可以直接访问。</p>
<pre class=" language-xml"><code class="language-xml">127.0.0.1       localhost</code></pre>
</li>
<li><p>没有：去DNS服务器上，找到的话就返回，找不到就返回找不到。</p>
<p><img src="JavaWeb.assets/image-20201128001724954.png" alt="image-20201128001724954" loading="lazy"></p>
<p>注：一个ip可以对应多个域名！</p>
</li>
</ol>
</li>
</ol>
<h4 id="3-4、发布一个web网站"><a href="#3-4、发布一个web网站" class="headerlink" title="3.4、发布一个web网站"></a>3.4、发布一个web网站</h4><ul>
<li><p>将自己写的网站，放到服务器（tomcat）中指定的web应用的文件夹（webapps）下，就可以访问了。</p>
</li>
<li><p>网站应该有的结构</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">--</span>webapps<span class="token operator">:</span>Tomcat服务器的web目录
    <span class="token operator">-</span>ROOT
    <span class="token operator">-</span>zhoustudy：网站的目录名
        <span class="token operator">-</span> WEB<span class="token operator">-</span>INF
            <span class="token operator">-</span>classes<span class="token operator">:</span>java程序
            <span class="token operator">-</span>lib<span class="token operator">:</span>web应用所依赖的jar包
            <span class="token operator">-</span>web<span class="token punctuation">.</span>xml  网站配置文件
        <span class="token operator">-</span> index<span class="token punctuation">.</span>html 默认的首页
        <span class="token operator">-</span> <span class="token keyword">static</span>
            <span class="token operator">-</span>css
                <span class="token operator">-</span>style<span class="token punctuation">.</span>css
            <span class="token operator">-</span>js
            <span class="token operator">-</span>img
        <span class="token operator">-</span>……</code></pre>
</li>
</ul>
<h3 id="4、Http"><a href="#4、Http" class="headerlink" title="4、Http"></a>4、Http</h3><h4 id="4-1、什么是http？"><a href="#4-1、什么是http？" class="headerlink" title="4.1、什么是http？"></a>4.1、什么是http？</h4><blockquote>
<p>http（HyperText Transfer Protocol,超文本传输协议）是一个简单的请求-响应协议，它通常运行在<a href="https://baike.baidu.com/item/TCP/33012" target="_blank" rel="noopener">TCP</a>（Transmission Control Protocol，传输控制协议）之上。</p>
</blockquote>
<ul>
<li>文本：html，字符串，…</li>
<li>超文本：图片，音乐，视频，定位，地图……</li>
<li>80</li>
</ul>
<p>https：安全的    443</p>
<h4 id="4-2、两个时代"><a href="#4-2、两个时代" class="headerlink" title="4.2、两个时代"></a>4.2、两个时代</h4><ul>
<li>http1.0<ul>
<li>http/1.0: 客户端可以与web服务器连接后，只能获得一个web资源，断开连接</li>
</ul>
</li>
<li>http2.0<ul>
<li>http/1.1： 客户端可以与web服务器连接后，可以获得多个web资源</li>
</ul>
</li>
</ul>
<h4 id="4-3、http请求"><a href="#4-3、http请求" class="headerlink" title="4.3、http请求"></a>4.3、http请求</h4><ul>
<li><p>客户端—发送请求(Request)—服务器</p>
<p>百度</p>
<pre class=" language-java"><code class="language-java">Request URL<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>   请求地址
Request Method<span class="token operator">:</span> GET      <span class="token comment" spellcheck="true">//get方法、post方法</span>
Status Code<span class="token operator">:</span> <span class="token number">200</span> OK     <span class="token comment" spellcheck="true">//状态码200</span>
Remote Address<span class="token operator">:</span> <span class="token number">180.101</span><span class="token punctuation">.</span><span class="token number">49.11</span><span class="token operator">:</span><span class="token number">443</span>   <span class="token comment" spellcheck="true">//远程地址  真实访问的是这个地址</span>
Referrer Policy<span class="token operator">:</span> strict<span class="token operator">-</span>origin<span class="token operator">-</span>when<span class="token operator">-</span>cross<span class="token operator">-</span>origin</code></pre>
<pre class=" language-java"><code class="language-java">Accept<span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">,</span>
Accept<span class="token operator">-</span>Encoding<span class="token operator">:</span> gzip<span class="token punctuation">,</span> deflate<span class="token punctuation">,</span> br
Accept<span class="token operator">-</span>Language<span class="token operator">:</span> en<span class="token operator">-</span>US<span class="token punctuation">,</span>en<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span>zh<span class="token operator">-</span>CN<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>zh<span class="token punctuation">;</span>q<span class="token operator">=</span><span class="token number">0.7</span>  <span class="token comment" spellcheck="true">//语言</span>
Cache<span class="token operator">-</span>Control<span class="token operator">:</span> max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">0</span>
Connection<span class="token operator">:</span> keep<span class="token operator">-</span>alive</code></pre>
<p><strong>1、请求行</strong></p>
<ul>
<li>请求行中的请求方法：GET</li>
<li>请求方式：Get，Post，HEAD，DELETE，PUT，TRACT<ul>
<li>get：请求能够携带的参数比较少，大小有限制，会在浏览器的URL地址栏显示数据内容，不安全，但是高效</li>
<li>post：请求能够携带的参数没有限制，不会在浏览器的URL地址栏显示数据内容，安全，但是高效</li>
</ul>
</li>
</ul>
<p><strong>2、消息头</strong></p>
<pre class=" language-java"><code class="language-java">Accept<span class="token operator">:</span> 告诉浏览器，他所支持的数据类型
Accept<span class="token operator">-</span>Encoding<span class="token operator">:</span>  支持哪种编码格式  GBK  UTF<span class="token operator">-</span><span class="token number">8</span>  GB2312  ISO8859<span class="token operator">-</span><span class="token number">1</span>
Accept<span class="token operator">-</span>Language<span class="token operator">:</span>   告诉浏览器，它的语言环境
Cache<span class="token operator">-</span>Control<span class="token operator">:</span>   缓存控制
Connection<span class="token operator">:</span>   告诉浏览器，请求完成时断开还是保持连接
HOST： 主机<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>/<span class="token punctuation">.</span></code></pre>
</li>
</ul>
<h4 id="4-4、http响应"><a href="#4-4、http响应" class="headerlink" title="4.4、http响应"></a>4.4、http响应</h4><ul>
<li><p>服务器—响应—客户端</p>
<p>百度</p>
<pre class=" language-java"><code class="language-java">Cache<span class="token operator">-</span>Control<span class="token operator">:</span> <span class="token keyword">private</span>      <span class="token comment" spellcheck="true">//缓存控制</span>
Connection<span class="token operator">:</span> keep<span class="token operator">-</span>alive    <span class="token comment" spellcheck="true">//连接：</span>
Content<span class="token operator">-</span>Encoding<span class="token operator">:</span> gzip     <span class="token comment" spellcheck="true">//编码</span>
Content<span class="token operator">-</span>Type<span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">;</span>charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>  <span class="token comment" spellcheck="true">//类型</span></code></pre>
<p><strong>1、响应体</strong></p>
<pre class=" language-java"><code class="language-java">Accept<span class="token operator">:</span> 告诉浏览器，他所支持的数据类型
Accept<span class="token operator">-</span>Encoding<span class="token operator">:</span>  支持哪种编码格式  GBK  UTF<span class="token operator">-</span><span class="token number">8</span>  GB2312  ISO8859<span class="token operator">-</span><span class="token number">1</span>
Accept<span class="token operator">-</span>Language<span class="token operator">:</span>   告诉浏览器，它的语言环境
Cache<span class="token operator">-</span>Control<span class="token operator">:</span>   缓存控制
Connection<span class="token operator">:</span>   告诉浏览器，请求完成时断开还是保持连接
HOST： 主机<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>/<span class="token punctuation">.</span>
Refresh<span class="token operator">:</span>告诉客户端，多久刷新一次
Location<span class="token operator">:</span>让网页重新定位</code></pre>
<p><strong>2、响应状态码</strong></p>
<p>200：请求响应成功</p>
<p>3xx：请求重定向</p>
<p>4xx：找不到资源  404</p>
<ul>
<li>资源不存在；</li>
</ul>
<p>5xx：服务器代码错误  500  502（网关错误）</p>
</li>
</ul>
<p><strong>常见面试题：</strong></p>
<p>当你的浏览器地址栏输入地址并回车的一瞬间到页面能够展示回来，经历了什么？</p>
<h3 id="5、Maven"><a href="#5、Maven" class="headerlink" title="5、Maven"></a>5、Maven</h3><ol>
<li><p>在Javaweb开发中，需要使用大量的jar包，我们手动去导入；</p>
</li>
<li><p>如何能够让一个东西自动帮我导入和配置这个jar包。</p>
<p>由此，Maven诞生了！</p>
<p>Maven的核心功能便是合理叙述项目间的依赖关系，通俗点讲，就是<strong>通过pom.xml文件的配置获取jar包</strong>，而不用手动去添加jar包。</p>
<p>如果需要使用pom.xml来获取jar包，那么首先该项目就必须为maven项目，maven项目可以这样去想，就是在java项目和web项目的上面包裹了一层maven，本质上java项目还是java项目，web项目还是web项目，但是包裹了maven之后，就可以使用maven提供的一些功能了(通过pom.xml添加jar包)。</p>
</li>
</ol>
<h4 id="5-1、Maven项目架构管理工具"><a href="#5-1、Maven项目架构管理工具" class="headerlink" title="5.1、Maven项目架构管理工具"></a>5.1、Maven项目架构管理工具</h4><p>我们目前用来就是方便导入jar包的！</p>
<p>Maven的核心思想：<strong>约定大于配置</strong></p>
<ul>
<li>有约束，不要去违反</li>
</ul>
<p>Maven会规定好你该如何去编写我们的Java代码，必须按照这个规范来。</p>
<h4 id="5-2、下载安装Maven（3-6-3与IDEA不兼容，坑死我了！！！最后换成了3-6-1）"><a href="#5-2、下载安装Maven（3-6-3与IDEA不兼容，坑死我了！！！最后换成了3-6-1）" class="headerlink" title="5.2、下载安装Maven（3.6.3与IDEA不兼容，坑死我了！！！最后换成了3.6.1）"></a>5.2、下载安装Maven（3.6.3与IDEA不兼容，坑死我了！！！最后换成了3.6.1）</h4><img src="JavaWeb.assets/image-20201128143531088.png" alt="image-20201128143531088" style="zoom:80%;" / loading="lazy">

<h4 id="5-3、环境变量配置"><a href="#5-3、环境变量配置" class="headerlink" title="5.3、环境变量配置"></a>5.3、环境变量配置</h4><ul>
<li>M2_HOME   maven目录下的bin目录</li>
<li>MAVEN_HOME  maven的目录</li>
<li>在系统的path中配置  %MAVEN_HOME%\bin</li>
</ul>
<p><img src="JavaWeb.assets/image-20201128145212492.png" alt="image-20201128145212492" loading="lazy"></p>
<p>测试是否配置成功。</p>
<h4 id="5-4、阿里云镜像"><a href="#5-4、阿里云镜像" class="headerlink" title="5.4、阿里云镜像"></a>5.4、阿里云镜像</h4><ul>
<li>镜像：mirrors<ul>
<li>作用：加速下载</li>
</ul>
</li>
<li>国内建议使用阿里云的镜像</li>
</ul>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Nexus aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.aliyun.com/nexus/content/groups/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span></code></pre>
<h4 id="5-5、本地仓库"><a href="#5-5、本地仓库" class="headerlink" title="5.5、本地仓库"></a>5.5、本地仓库</h4><p>在本地的仓库，远程仓库；</p>
<p><strong>建立一个本地仓库</strong>：localRepository</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">></span></span>D:\environment\apache-maven-3.6.3\maven-repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">></span></span></code></pre>
<h4 id="5-6、在IDEA中使用Maven"><a href="#5-6、在IDEA中使用Maven" class="headerlink" title="5.6、在IDEA中使用Maven"></a>5.6、在IDEA中使用Maven</h4><ol>
<li><p>启动IDEA</p>
</li>
<li><p>创建一个Maven项目</p>
<p><img src="JavaWeb.assets/image-20201128155920684.png" alt="image-20201128155920684" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128160146942.png" alt="image-20201128160146942" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128160234623.png" alt="image-20201128160234623" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128160404146.png" alt="image-20201128160404146" loading="lazy"></p>
<ol start="3">
<li><p>等待项目初始化完毕</p>
<p><img src="JavaWeb.assets/image-20201128160700639.png" alt="image-20201128160700639" loading="lazy"></p>
</li>
<li><p>在Maven仓库中下载了大量东西</p>
</li>
<li><p>IDEA中的Maven设置</p>
<p>注意：IDEA项目创建成功后，看一眼Maven的配置。</p>
</li>
</ol>
</li>
</ol>
<p><img src="JavaWeb.assets/image-20201128150948873.png" alt="image-20201128150948873" loading="lazy"></p>
<ol start="6">
<li><p>Maven在IDEA中就创建完毕！</p>
<p><img src="JavaWeb.assets/image-20201128161811415.png" alt="image-20201128161811415" loading="lazy"></p>
</li>
</ol>
<h4 id="5-7、创建一个普通的Maven项目"><a href="#5-7、创建一个普通的Maven项目" class="headerlink" title="5.7、创建一个普通的Maven项目"></a>5.7、创建一个普通的Maven项目</h4><p>不用勾选从已有模板中创建</p>
<p><img src="JavaWeb.assets/image-20201128173519871.png" alt="image-20201128173519871" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128161724742.png" alt="image-20201128161724742" loading="lazy"></p>
<h4 id="5-8、标记文件夹功能"><a href="#5-8、标记文件夹功能" class="headerlink" title="5.8、标记文件夹功能"></a>5.8、标记文件夹功能</h4><p><img src="JavaWeb.assets/image-20201128162024358.png" alt="image-20201128162024358" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128173828919.png" alt="image-20201128173828919" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128174021920.png" alt="image-20201128174021920" loading="lazy"></p>
<h4 id="5-9、在IDEA中配置Tomcat"><a href="#5-9、在IDEA中配置Tomcat" class="headerlink" title="5.9、在IDEA中配置Tomcat"></a>5.9、在IDEA中配置Tomcat</h4><p><img src="JavaWeb.assets/image-20201128174240047.png" alt="image-20201128174240047" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128174333041.png" alt="image-20201128174333041" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128174553589.png" alt="image-20201128174553589" loading="lazy"></p>
<p>解决警告问题：</p>
<p>必须要的：<strong>为什么会有这个问题：我们访问一个网站，需要指定一个文件夹名字。</strong></p>
<p><img src="JavaWeb.assets/image-20201128174842716.png" alt="image-20201128174842716" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128175226936.png" alt="image-20201128175226936" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128175328127.png" alt="image-20201128175328127" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201128194702164.png" alt="image-20201128194702164" loading="lazy"></p>
<h4 id="5-10、pom文件"><a href="#5-10、pom文件" class="headerlink" title="5.10、pom文件"></a>5.10、pom文件</h4><p><strong>pom.xml是Maven的核心配置文件</strong></p>
<p><img src="JavaWeb.assets/image-20201128194617356.png" alt="image-20201128194617356" loading="lazy"></p>
<img src="JavaWeb.assets/image-20201128232839747.png" alt="image-20201128232839747" style="zoom:80%;" / loading="lazy">

<p><img src="JavaWeb.assets/image-20210107224237329.png" alt="image-20210107224237329" loading="lazy"></p>
<p>maven由于他的<strong>约定大于配置</strong>，我们之后可以能遇到我们写的配置文件，无法被导出或者生效的问题，解决方案：</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--在build中配置resources,来防止我们资源导出失败的问题--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span>
</code></pre>
<h4 id="5-11IDEA操作"><a href="#5-11IDEA操作" class="headerlink" title="5.11IDEA操作"></a>5.11IDEA操作</h4><p><img src="JavaWeb.assets/image-20201128233441044.png" alt="image-20201128233441044" loading="lazy"></p>
<img src="JavaWeb.assets/image-20201128233305371.png" alt="image-20201128233305371" style="zoom:80%;" / loading="lazy">

<h4 id="5-12解决遇到的问题"><a href="#5-12解决遇到的问题" class="headerlink" title="5.12解决遇到的问题"></a>5.12解决遇到的问题</h4><p>1、Maven 3.6.2</p>
<p>​    <strong>Unable to import maven project:See logs for details</strong></p>
<p>解决办法：降级为3.6.1</p>
<p>2、Tomcat闪退</p>
<p>3、IDEA中每次都要重复配置Maven</p>
<p>在IDEA中的全局默认配置中去配置</p>
<img src="JavaWeb.assets/image-20201231201523135.png" alt="image-20201231201523135" style="zoom:67%;" / loading="lazy">

<p>4、Maven项目中Tomcat无法配置</p>
<p>5、Maven默认web项目中的web.xml文件</p>
<p><img src="JavaWeb.assets/image-20201231202000213.png" alt="image-20201231202000213" loading="lazy"></p>
<p>6、替换为webapp4.0版本和tomcat一致</p>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span>
         <span class="token attr-name">metadata-complete</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span></code></pre>
<p>7、Maven仓库的使用</p>
<p>地址：<a href="https://mvnrepository.com/" target="_blank" rel="noopener">https://mvnrepository.com/</a></p>
<img src="JavaWeb.assets/image-20201231203300379.png" alt="image-20201231203300379" style="zoom:67%;" / loading="lazy">

<p><img src="JavaWeb.assets/image-20201231203411538.png" alt="image-20201231203411538" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20201231203513113.png" alt="image-20201231203513113" loading="lazy"></p>
<h3 id="6、Servlet"><a href="#6、Servlet" class="headerlink" title="6、Servlet"></a>6、Servlet</h3><h4 id="6-1、Servlet简介"><a href="#6-1、Servlet简介" class="headerlink" title="6.1、Servlet简介"></a>6.1、Servlet简介</h4><ul>
<li>Servlet就是sun公司开发动态web的一门技术</li>
<li>sun在这些API中提供一个接口叫做Servlet，如果想开发一个Servlet程序，只需要两个小步骤：<ul>
<li>编写一个类，实现Servlet接口</li>
<li>把开发好的Java类部署到web服务器中</li>
</ul>
</li>
</ul>
<p><strong>把实现了Servlet接口的Java程序叫做：Servlet</strong></p>
<h4 id="6-2、HelloServlet"><a href="#6-2、HelloServlet" class="headerlink" title="6.2、HelloServlet"></a>6.2、HelloServlet</h4><p>Servlet接口Sun公司有两个默认的实现类：HttpServlet，GenericServlet</p>
<ol>
<li><p>构建一个<strong>普通</strong>的Maven项目，删掉里面的<strong>src目录</strong>，以后就在这个项目里面建立Moudel；这个空的工程就是Maven主工程；</p>
</li>
<li><p>关于Maven父子工程的理解：</p>
</li>
</ol>
<p>​        父项目中会有</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>modules<span class="token operator">></span>
<span class="token operator">&lt;</span>module<span class="token operator">></span>servlet<span class="token operator">-</span><span class="token number">01</span><span class="token operator">&lt;</span><span class="token operator">/</span>module<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>modules<span class="token operator">></span></code></pre>
<p><img src="JavaWeb.assets/image-20210107000721950.png" alt="image-20210107000721950" loading="lazy"></p>
<p>​     子项目中会有：</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>parent<span class="token operator">></span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>javaweb<span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span>servlet<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">></span>org<span class="token punctuation">.</span>example<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>
    <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">1.0</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>parent<span class="token operator">></span></code></pre>
<p>​      父项目中的jar包子项目可以直接使用</p>
<pre class=" language-java"><code class="language-java">son <span class="token keyword">extends</span> <span class="token class-name">father</span> </code></pre>
<ol start="3">
<li>Maven环境优化</li>
</ol>
<p>​        1.修改web.xml为最新的</p>
<p>​        2.将Maven的结构搭建完整（新建java、resources文件夹）</p>
<ol start="4">
<li><p>编写一个Servlet</p>
<ol>
<li>编写一个普通类</li>
<li>实现Servlet接口，这里我们直接继承HttpServlet</li>
</ol>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//由于get或者post只是请求实现的不同的方式，可以相互调用，业务逻辑都一样；</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//ServletOutputStream outputStream = resp.getOutputStream();</span>
        PrintWriter writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//响应流</span>
        writer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Hello,Servlet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
</li>
<li><p>编写Servlet的映射</p>
<p>为什么需要映射：我们写的是Java程序，但是要通过浏览器访问，而浏览器需要连接web服务器，所以我们需要在web服务中注册我们写的Servlet，还需要给它一个浏览器能够访问的路径；</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--注册Servlet--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.zhou.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token comment" spellcheck="true">&lt;!--Servlet的请求路径--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>配置Tomcat</p>
<p>注意：配置项目发布的路径就可以了</p>
<img src="JavaWeb.assets/image-20210107140913751.png" alt="image-20210107140913751" style="zoom:67%;" / loading="lazy">

<p>遇到no artifacts configured错误，解决办法<a href="https://www.cnblogs.com/gbb123/p/6782227.html" target="_blank" rel="noopener">https://www.cnblogs.com/gbb123/p/6782227.html</a></p>
</li>
<li><p>启动测试，OK！</p>
</li>
</ol>
<h4 id="6-3、Servlet原理"><a href="#6-3、Servlet原理" class="headerlink" title="6.3、Servlet原理"></a>6.3、Servlet原理</h4><p>Servlet是由Web服务器调用，web服务器在收到浏览器请求之后，会：</p>
<img src="JavaWeb.assets/image-20210107190507482.png" alt="image-20210107190507482" style="zoom:67%;" / loading="lazy">

<h4 id="6-4、Mapping问题"><a href="#6-4、Mapping问题" class="headerlink" title="6.4、Mapping问题"></a>6.4、Mapping问题</h4><ol>
<li><p>一个Servlet可以指定一个映射路径</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>一个Servlet可以指定多个映射路径</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>一个Servlet可以指定通用映射路径</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>默认请求路径（少用，会把首页干掉）</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>指定一些后缀或者前缀等等…</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--可以自定义后缀实现请求映射  如 rfrwgwhgtwhy.qingjiang
    注意：*前面不能加项目映射的路径--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.qingjiang<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p><strong>优先级问题</strong></p>
<p>指定了固有的映射路径优先级最高，如果找不到就会走默认的处理请求：</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--404--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.zhou.servlet.ErrorServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
</ol>
<h4 id="6-5、ServletContext"><a href="#6-5、ServletContext" class="headerlink" title="6.5、ServletContext"></a>6.5、ServletContext</h4><p>web容器在启动的时候，它会为每个web程序都创建一个对应的<code>ServletContext</code>对象，它代表了<strong>当前的web应用</strong>；</p>
<h5 id="1、共享数据"><a href="#1、共享数据" class="headerlink" title="1、共享数据"></a><strong>1、共享数据</strong></h5><p>我在这个Servlet中保存的数据，可以在另外一个Servlet中拿到。（通过ServletContext）</p>
<img src="JavaWeb.assets/image-20210108113105081.png" alt="image-20210108113105081" style="zoom: 80%;" / loading="lazy">

<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>


        <span class="token comment" spellcheck="true">//this.getInitParameter()  初始化参数</span>
        <span class="token comment" spellcheck="true">//this.getServletConfig()   Servlet配置</span>
        <span class="token comment" spellcheck="true">//this.getServletContext()   Servlet上下文</span>
        ServletContext context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        String username <span class="token operator">=</span> <span class="token string">"琴江"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//数据</span>
        context<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//将一个数据保存在了ServletContext中，名字为：username，值：username</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        ServletContext context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String username <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"名字："</span><span class="token operator">+</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.zhou.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>getc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.zhou.servlet.GetServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>getc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/getc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
<p>测试访问结果：先访问…/hello 再访问…/getc，可获取 <code>名字：琴江</code>字符。</p>
<h5 id="2、获取初始化参数"><a href="#2、获取初始化参数" class="headerlink" title="2、获取初始化参数"></a>2、获取初始化参数</h5><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--web.xml中配置一些web应用初始化参数--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>url<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>jdbc:mysql://localhost:3306/mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    ServletContext context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String url <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h5 id="3、请求转发（注意和重定向的区别）"><a href="#3、请求转发（注意和重定向的区别）" class="headerlink" title="3、请求转发（注意和重定向的区别）"></a>3、请求转发（注意和重定向的区别）</h5><p><img src="JavaWeb.assets/image-20210108133248506.png" alt="image-20210108133248506" loading="lazy"></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"进入了ServletDemo04"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ServletContext context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//RequestDispatcher requestDispatcher = context.getRequestDispatcher("/gp");  //转发的请求路径</span>
    <span class="token comment" spellcheck="true">//requestDispatcher.forward(req,resp); //调用forward实现请求转发</span>
    context<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/gp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
<h5 id="4、读取资源文件"><a href="#4、读取资源文件" class="headerlink" title="4、读取资源文件"></a>4、读取资源文件</h5><p>Properties</p>
<ul>
<li>在java目录下新建properties</li>
<li>在resources目录下新建properties</li>
</ul>
<p>发现：都被打包到了同一个路径下：classes，我们俗称这个路径为classpath；</p>
<p>思路：需要一个文件流。</p>
<pre class=" language-java"><code class="language-java">username<span class="token operator">=</span>root
password<span class="token operator">=</span><span class="token number">123456</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo05</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        InputStream is <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/classes/db.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Properties prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        prop<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String user <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String pwd <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>user<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre>
<p>访问测试即可！</p>
<p><strong>以上四种操作以后都有对应的别的方法来实现，这里只是都用Servlet来演示下。</strong></p>
<h4 id="6-6、HttpServletResponse"><a href="#6-6、HttpServletResponse" class="headerlink" title="6.6、HttpServletResponse"></a>6.6、HttpServletResponse</h4><p>web服务器接收到客户端的http请求，针对这个请求，分别创建一个代表请求的HttpServletRequest对象，代表响应的一个HttpServletResponse；</p>
<ul>
<li>如果要获取客户端请求过来的参数：找HttpServletRequest</li>
<li>如果要给客户端响应一些信息：找HttpServletResponse</li>
</ul>
<h5 id="1、简单分类"><a href="#1、简单分类" class="headerlink" title="1、简单分类"></a>1、简单分类</h5><p><strong>负责向浏览器发送数据的方法：</strong></p>
<pre class=" language-java"><code class="language-java">ServletOutputStream <span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//写其他的字符流</span>

PrintWriter <span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//写中文</span></code></pre>
<p>负责向浏览器发送响应头的方法：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span>String var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setContentLength</span><span class="token punctuation">(</span><span class="token keyword">int</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setContentLengthLong</span><span class="token punctuation">(</span><span class="token keyword">long</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setContentType</span><span class="token punctuation">(</span>String var1<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">setDateHeader</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> <span class="token keyword">long</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addDateHeader</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> <span class="token keyword">long</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setHeader</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> String var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addHeader</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> String var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setIntHeader</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> <span class="token keyword">int</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addIntHeader</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> <span class="token keyword">int</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>响应的状态码：</strong></p>
<pre class=" language-java"><code class="language-java">    <span class="token keyword">int</span> SC_CONTINUE <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_SWITCHING_PROTOCOLS <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_OK <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_CREATED <span class="token operator">=</span> <span class="token number">201</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_ACCEPTED <span class="token operator">=</span> <span class="token number">202</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_NON_AUTHORITATIVE_INFORMATION <span class="token operator">=</span> <span class="token number">203</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_NO_CONTENT <span class="token operator">=</span> <span class="token number">204</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_RESET_CONTENT <span class="token operator">=</span> <span class="token number">205</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_PARTIAL_CONTENT <span class="token operator">=</span> <span class="token number">206</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_MULTIPLE_CHOICES <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_MOVED_PERMANENTLY <span class="token operator">=</span> <span class="token number">301</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_MOVED_TEMPORARILY <span class="token operator">=</span> <span class="token number">302</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_FOUND <span class="token operator">=</span> <span class="token number">302</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_SEE_OTHER <span class="token operator">=</span> <span class="token number">303</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_NOT_MODIFIED <span class="token operator">=</span> <span class="token number">304</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_USE_PROXY <span class="token operator">=</span> <span class="token number">305</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_TEMPORARY_REDIRECT <span class="token operator">=</span> <span class="token number">307</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_BAD_REQUEST <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_UNAUTHORIZED <span class="token operator">=</span> <span class="token number">401</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_PAYMENT_REQUIRED <span class="token operator">=</span> <span class="token number">402</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_FORBIDDEN <span class="token operator">=</span> <span class="token number">403</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_NOT_FOUND <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_METHOD_NOT_ALLOWED <span class="token operator">=</span> <span class="token number">405</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_NOT_ACCEPTABLE <span class="token operator">=</span> <span class="token number">406</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_PROXY_AUTHENTICATION_REQUIRED <span class="token operator">=</span> <span class="token number">407</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_REQUEST_TIMEOUT <span class="token operator">=</span> <span class="token number">408</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_CONFLICT <span class="token operator">=</span> <span class="token number">409</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_GONE <span class="token operator">=</span> <span class="token number">410</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_LENGTH_REQUIRED <span class="token operator">=</span> <span class="token number">411</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_PRECONDITION_FAILED <span class="token operator">=</span> <span class="token number">412</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_REQUEST_ENTITY_TOO_LARGE <span class="token operator">=</span> <span class="token number">413</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_REQUEST_URI_TOO_LONG <span class="token operator">=</span> <span class="token number">414</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_UNSUPPORTED_MEDIA_TYPE <span class="token operator">=</span> <span class="token number">415</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_REQUESTED_RANGE_NOT_SATISFIABLE <span class="token operator">=</span> <span class="token number">416</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_EXPECTATION_FAILED <span class="token operator">=</span> <span class="token number">417</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_INTERNAL_SERVER_ERROR <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_NOT_IMPLEMENTED <span class="token operator">=</span> <span class="token number">501</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_BAD_GATEWAY <span class="token operator">=</span> <span class="token number">502</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_SERVICE_UNAVAILABLE <span class="token operator">=</span> <span class="token number">503</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_GATEWAY_TIMEOUT <span class="token operator">=</span> <span class="token number">504</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> SC_HTTP_VERSION_NOT_SUPPORTED <span class="token operator">=</span> <span class="token number">505</span><span class="token punctuation">;</span></code></pre>
<h5 id="2、常见应用"><a href="#2、常见应用" class="headerlink" title="2、常见应用"></a>2、常见应用</h5><ol>
<li>向浏览器输出消息（略）</li>
<li>下载文件<ol>
<li>要获取下载文件的路径</li>
<li>下载的文件名是啥？</li>
<li>设置想办法让浏览器能够支持下载我们需要的东西</li>
<li>获取下载文件的输入流</li>
<li>创建缓冲区</li>
<li>获取OutputStream对象</li>
<li>将FileOutputStream流写入到buffer缓冲区</li>
<li>使用OutputStream将缓冲区中的数据输出到客户端！</li>
</ol>
</li>
</ol>
<pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//1. 要获取下载文件的路径</span>
    <span class="token comment" spellcheck="true">//String realPath = this.getServletContext().getRealPath("/琴江.png");</span>
    String realPath <span class="token operator">=</span> <span class="token string">"C:\\Users\\zhouxf\\IdeaProjects\\javaweb-02-servlet\\response\\src\\main\\resources\\琴江.png"</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"下载文件的路径："</span><span class="token operator">+</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//2. 下载的文件名是啥？</span>
    String fileName <span class="token operator">=</span> realPath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>realPath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//3. 设置想办法让浏览器能够支持下载我们需要的东西, 中文文件名URLEncoder.encode编码，否则会乱码</span>
    resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment;filename="</span><span class="token operator">+</span>URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//4. 获取下载文件的输入流</span>
    FileInputStream in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//5. 创建缓冲区</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//6. 获取OutputStream对象</span>
    ServletOutputStream out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//7. 将FileOutputStream流写入到buffer缓冲区</span>
    <span class="token comment" spellcheck="true">//8. 使用OutputStream将缓冲区中的数据输出到客户端！</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h5 id="3、验证码功能"><a href="#3、验证码功能" class="headerlink" title="3、验证码功能"></a>3、验证码功能</h5><p>验证怎么来的？</p>
<ul>
<li>前端实现 </li>
<li>后端实现，需要用到java的图片类，生产一个图片</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//如何让浏览器3秒自动刷新一次；</span>
    resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">,</span><span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//在内存中创建一个图片</span>
    BufferedImage image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> BufferedImage<span class="token punctuation">.</span>TYPE_INT_RGB<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//得到图片</span>
    Graphics2D g <span class="token operator">=</span> <span class="token punctuation">(</span>Graphics2D<span class="token punctuation">)</span> image<span class="token punctuation">.</span><span class="token function">getGraphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//笔</span>
    <span class="token comment" spellcheck="true">//设置图片的背景颜色</span>
    g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span>
    g<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//给图片写数据</span>
    g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    g<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span>Font<span class="token punctuation">.</span>BOLD<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g<span class="token punctuation">.</span><span class="token function">drawString</span><span class="token punctuation">(</span><span class="token function">makeNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//告诉浏览器，这个请求用图片的方式打开</span>
    resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"image/jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//网站存在缓存，不让浏览器缓存</span>
    resp<span class="token punctuation">.</span><span class="token function">setDateHeader</span><span class="token punctuation">(</span><span class="token string">"expires"</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Cache-Control"</span><span class="token punctuation">,</span><span class="token string">"no-cache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Pragma"</span><span class="token punctuation">,</span><span class="token string">"no-cache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//把图片写给浏览器</span>
    ImageIO<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span><span class="token string">"jpg"</span><span class="token punctuation">,</span>resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//生成定长字符串</span>
<span class="token keyword">private</span> String <span class="token function">makeNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Random random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String num <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">9999999</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">;</span>
    StringBuffer sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">7</span><span class="token operator">-</span>num<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    num <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>num<span class="token punctuation">;</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
<img src="JavaWeb.assets/image-20210108165953310.png" alt="image-20210108165953310" style="zoom:67%;" / loading="lazy">

<h5 id="4、实现重定向"><a href="#4、实现重定向" class="headerlink" title="4、实现重定向"></a>4、实现重定向</h5><p><img src="JavaWeb.assets/image-20210108170149748.png" alt="image-20210108170149748" loading="lazy"></p>
<p>一个web资源（B）收到客户端（A)请求后，他会通知客户端（A）去访问另外一个web资源（C），这个过程叫重定向。</p>
<p>常见场景：</p>
<ul>
<li>用户登录</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">sendRedirect</span><span class="token punctuation">(</span>String var1<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">;</span></code></pre>
<p>测试</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">/*
        resp.setHeader("Location","/r/img");
        resp.setStatus(302);
        */</span>
    resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/r/img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//重定向</span>
<span class="token punctuation">}</span></code></pre>
<p>测试2：</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//处理请求</span>
    String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//重定向时候一定要注意路径问题，否则404</span>
    resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/r/success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
<p>Servlet注册</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>request<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.zhou.servlet.RequestTest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>request<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span></code></pre>
<p>success.jsp</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">page</span> <span class="token attr-name">contentType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html;charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>success<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>index.jsp</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%--这里提交的路径，需要寻找到项目的路径--%</span><span class="token punctuation">></span></span>
&lt;%--${pageContext.request.contextPath}代表当前的项目--%>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/login<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
    密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p><strong>面试题：请你聊聊重定向和转发的区别？</strong></p>
<p>相同点：</p>
<ul>
<li>页面都会实现跳转</li>
</ul>
<p>不同点：</p>
<ul>
<li>请求转发的时候，URL不会发生变化</li>
<li>重定向的时候，URL地址栏会发生变化</li>
</ul>
<h4 id="6-7、HttpServletRequest"><a href="#6-7、HttpServletRequest" class="headerlink" title="6.7、HttpServletRequest"></a>6.7、HttpServletRequest</h4><p>HttpServletRequest代表客户端的请求，用户通过Http协议访问服务器，HTTP请求中的所有信息会被封装到HttpServletRequest中，通过这个HttpServletRequest的方法，可以获得客户端的所有信息。</p>
<p><img src="JavaWeb.assets/image-20210108180808757.png" alt="image-20210108180808757" loading="lazy"></p>
<p><img src="JavaWeb.assets/image-20210108180849976.png" alt="image-20210108180849976" loading="lazy"></p>
<h5 id="1、获取参数，请求转发"><a href="#1、获取参数，请求转发" class="headerlink" title="1、获取参数，请求转发"></a>1、获取参数，请求转发</h5><p><img src="JavaWeb.assets/image-20210108181034646.png" alt="image-20210108181034646" loading="lazy"></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String<span class="token punctuation">[</span><span class="token punctuation">]</span> hobbies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"hobbies"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//后台接收中文乱码问题</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//通过请求转发</span>
    <span class="token comment" spellcheck="true">//注意：转发是服务器内部的，不需要（像重定向）写项目路径</span>
    req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
<p><strong>面试题：请你聊聊重定向和转发的区别？</strong></p>
<p>相同点：</p>
<ul>
<li>页面都会实现跳转</li>
</ul>
<p>不同点：</p>
<ul>
<li>请求转发的时候，URL不会发生变化    307</li>
<li>重定向的时候，URL地址栏会发生变化    302</li>
</ul>
<h3 id="7、Cookie、Session"><a href="#7、Cookie、Session" class="headerlink" title="7、Cookie、Session"></a>7、Cookie、Session</h3><h4 id="7-1、会话"><a href="#7-1、会话" class="headerlink" title="7.1、会话"></a>7.1、会话</h4><p><strong>会话</strong>：用户打开一个浏览器，点击了很多超链接，访问多个web资源，关闭浏览器，这个过程可以称之为会话。</p>
<p><strong>有状态会话：</strong>一个同学来过教室，下次再来教室，我们会知道这个同学，曾经来<strong>过，称之为有状态会话；</strong></p>
<p><strong>你怎么证明你是西开的学生？</strong></p>
<p>你          西开</p>
<ol>
<li>发票                    西开给你发票</li>
<li>学校登记           西开标记你来过了</li>
</ol>
<p><strong>一个网站，怎么证明你来过？</strong></p>
<p>客户端    服务端</p>
<ol>
<li>服务端给客户端一个信件，客户端下次访问服务端带上信件就可以了； <strong>cookie</strong></li>
<li>服务器登记你来过了，下次你来的时候我来匹配你；<strong>session</strong></li>
</ol>
<h4 id="7-2、保存会话的两种技术"><a href="#7-2、保存会话的两种技术" class="headerlink" title="7.2、保存会话的两种技术"></a>7.2、保存会话的两种技术</h4><p><strong>cookie</strong></p>
<ul>
<li>客户端技术（响应，请求）</li>
</ul>
<p><strong>session</strong></p>
<ul>
<li>服务器技术，利用这个技术，可以保存用户的会话信息。我们可以把信息或者数据放在session中！</li>
</ul>
<p>常见场景：网站登录之后，你下次不用再登录了，第二次访问直接就上去了！</p>
<h4 id="7-3、Cookie"><a href="#7-3、Cookie" class="headerlink" title="7.3、Cookie"></a>7.3、Cookie</h4><p><img src="JavaWeb.assets/image-20210111200748405.png" alt="image-20210111200748405" loading="lazy"></p>
<p>1、从请求中拿到cookie信息</p>
<p>2、服务器响应给客户端cookie</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//Cookie,服务器端从客户端获取</span>
Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">//获取cookie的名字（键）</span>
cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">//获取cookie中的值</span>
<span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"lastLoginTime"</span><span class="token punctuation">,</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//新建一个cookie</span>
cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//设置cookie的有效期</span>
resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//响应给客户端一个cookie</span></code></pre>
<p><strong>cookie：一般会保存在本地的用户目录Appdata下!</strong></p>
<p>一个网站cookie是否存在上限？</p>
<ul>
<li>一个cookie只能保存一个信息；</li>
<li>一个web站点可以给浏览器发送多个cookie，最多存放20个cookie；</li>
<li>cookie大小有限制4kb；</li>
<li>浏览器上限：300个cookie</li>
</ul>
<p><strong>删除cookie：</strong></p>
<ul>
<li>不设置有效期，关闭浏览器，自动失效；</li>
<li>设置有效期时间为0；</li>
</ul>
<p><strong>编码解码</strong></p>
<pre class=" language-java"><code class="language-java">URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"琴江"</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span>
URLDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span>    </code></pre>
<h4 id="7-4、Session（重点）"><a href="#7-4、Session（重点）" class="headerlink" title="7.4、Session（重点）"></a>7.4、Session（重点）</h4><p><img src="JavaWeb.assets/image-20210111200941008.png" alt="image-20210111200941008" loading="lazy"></p>
<p>什么是Session：</p>
<ul>
<li><p>服务器会给每一个用户（浏览器）创建一个Session对象；</p>
</li>
<li><p>一个Session独占一个浏览器，只要浏览器没有关闭，这个Session就存在；</p>
</li>
<li><p>用户登录之后，整个网站都可以访问！–&gt;保存用户的信息；保存购物车的信息…</p>
<p><img src="JavaWeb.assets/image-20210111181157875.png" alt="image-20210111181157875" loading="lazy"></p>
</li>
</ul>
<p>Session和Cookie的区别：</p>
<ul>
<li>Cookie是把用户的数据写给用户的浏览器中，浏览器保存（可以保存多个）；</li>
<li>Session把用户的数据写到用户独占的Session中，服务器端保存（一般只保存重要的信息，减少服务器资源的浪费）；</li>
<li>Session对象由服务器创建。</li>
</ul>
<p>使用场景：</p>
<ul>
<li>保存一个登录用户的信息；</li>
<li>购物车信息；</li>
<li>在整个网站中经常会使用的数据，我们将它保存在Session中；</li>
</ul>
<p>使用Session：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionDemo01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//创建session并往里面存东西</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//解决乱码问题</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//得到Session</span>
        HttpSession session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//给Session中存东西</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"琴江"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//获取session的ID</span>
        String id <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//判断session是不是新创建的</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">isNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"session创建成功，ID："</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"session已经在服务器中存在了，ID："</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">//session创建的时候做了什么事情</span>
        <span class="token comment" spellcheck="true">//Cookie cookie = new Cookie("JSWSSIONID",id);</span>
        <span class="token comment" spellcheck="true">//resp.addCookie(cookie);</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionDemo02</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//得到session并输出</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//得到Session</span>
        HttpSession session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Person person <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionDemo03</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        HttpSession session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//手动注销Session</span>
        session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>会话自动过期：web.xml</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--设置session默认的失效时间--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!--1分钟后session自动失效，以分钟为单位--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span></code></pre>
<p><img src="JavaWeb.assets/image-20210111201101517.png" alt="image-20210111201101517" loading="lazy"></p>
<h3 id="8、JSP"><a href="#8、JSP" class="headerlink" title="8、JSP"></a>8、JSP</h3><h4 id="8-1、什么是JSP"><a href="#8-1、什么是JSP" class="headerlink" title="8.1、什么是JSP"></a>8.1、什么是JSP</h4><p>Java Server pages：Java服务器端页面，也和Servlet一样，用于动态Web技术！</p>
<p>最大特点：</p>
<ul>
<li>写JSP就像在写HTML</li>
<li>区别：<ul>
<li>HTML只给用户提供静态的数据</li>
<li>JSP页面可以嵌入Java代码，为用户提供动态数据；</li>
</ul>
</li>
</ul>
<h4 id="8-2、JSP原理"><a href="#8-2、JSP原理" class="headerlink" title="8.2、JSP原理"></a>8.2、JSP原理</h4><p>思路：JSP到底怎么执行的？</p>
<ul>
<li><p>代码层面没有任何问题</p>
</li>
<li><p>服务器内部工作</p>
<p>tomcat中有一个work目录</p>
<p>IDEA中使用Tomcat会在IDEA的tomcat中生成一个work目录</p>
<p><img src="JavaWeb.assets/image-20210111201939244.png" alt="image-20210111201939244" loading="lazy"></p>
</li>
</ul>
<p>我的电脑地址：</p>
<pre class=" language-java"><code class="language-java">C<span class="token operator">:</span>\Users\zhouxf\AppData\Local\JetBrains\IntelliJIdea2020<span class="token number">.2</span>\tomcat\Unnamed_javaweb<span class="token operator">-</span>session<span class="token operator">-</span>cookie\work\Catalina\localhost\ROOT\org\apache\jsp</code></pre>
<p>发现页面转变成了java程序！</p>
<p><img src="JavaWeb.assets/image-20210111202539015.png" alt="image-20210111202539015" loading="lazy"></p>
<p><strong>浏览器向服务器发送请求，不管访问什么资源，其实都是在访问Servlet！</strong></p>
<p>JSP最终也会转换成一个java类！</p>
<p><strong>JSP本质上就是一个Servlet！</strong></p>
<p>分析一波index_jsp.java</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//初始化</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//销毁</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//JSPService</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspService</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span>
</code></pre>
<ol>
<li><p>判断请求</p>
<p><img src="JavaWeb.assets/image-20210111204227628.png" alt="image-20210111204227628" loading="lazy"></p>
</li>
<li><p>内置一些对象</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span>PageContext pageContext<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//页面上下文</span>
javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpSession session <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//session</span>
<span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ServletContext application<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//applicationContext</span>
<span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ServletConfig config<span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">//config</span>
javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span>JspWriter out <span class="token operator">=</span> null<span class="token punctuation">;</span>           <span class="token comment" spellcheck="true">//out</span>
<span class="token keyword">final</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object page <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>               <span class="token comment" spellcheck="true">//page:当前页   </span>
HttpServletRequest request                        <span class="token comment" spellcheck="true">//请求</span>
HttpServletResponse response                      <span class="token comment" spellcheck="true">//响应</span></code></pre>
</li>
<li><p>输出页面前增加的代码</p>
<pre class=" language-java"><code class="language-java">response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//设置响应的页面类型</span>
pageContext <span class="token operator">=</span> _jspxFactory<span class="token punctuation">.</span><span class="token function">getPageContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">8192</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
_jspx_page_context <span class="token operator">=</span> pageContext<span class="token punctuation">;</span>
application <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
config <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
session <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
_jspx_out <span class="token operator">=</span> out<span class="token punctuation">;</span></code></pre>
</li>
<li><p>以上的这些个对象我们可以在JSP页面中直接使用！</p>
</li>
</ol>
<p><strong>访问JSP页面的大致流程如下：</strong></p>
<img src="JavaWeb.assets/image-20210111205614100.png" alt="image-20210111205614100"  / loading="lazy">

<p>在JSP页面中：</p>
<ul>
<li><p>只要是java代码就会原封不动地输出；</p>
</li>
<li><p>如果是HTML代码，就会被转换成 <code>out.write(&quot;name:&quot;);</code>这样的格式被渲染到前端！</p>
<p>例如：hello.jsp</p>
<p><img src="JavaWeb.assets/image-20210111210443225.png" alt="image-20210111210443225" loading="lazy"></p>
<p>hello_jsp.java</p>
<p><img src="JavaWeb.assets/image-20210111210655860.png" alt="image-20210111210655860" loading="lazy"></p>
</li>
</ul>
<h4 id="8-3、JSP基础语法"><a href="#8-3、JSP基础语法" class="headerlink" title="8.3、JSP基础语法"></a>8.3、JSP基础语法</h4><p>任何语言都有自己的语法，java中有。JSP作为java技术的一种应用，它拥有一些自己扩充的语法（了解，知道即可！），java所有语法都支持！</p>
<p><img src="JavaWeb.assets/image-20210112195723228.png" alt="image-20210112195723228" loading="lazy"></p>
<h5 id="JSP表达式"><a href="#JSP表达式" class="headerlink" title="JSP表达式"></a><strong>JSP表达式</strong></h5><pre class=" language-jsp"><code class="language-jsp"><%--JSP表达式
    作用：用来将程序的输出，输出到客户端
    <%= 变量或者表达式%>
--%>
<%= new java.util.Date()%></code></pre>
<h5 id="JSP脚本片段"><a href="#JSP脚本片段" class="headerlink" title="JSP脚本片段"></a><strong>JSP脚本片段</strong></h5><pre class=" language-jsp"><code class="language-jsp"><%--JSP脚本片段--%>
<%
int sum = 0;
for (int i= 1;i<=100;i++){
    sum += i;
}
out.println("<h1>Sum="+sum+"</h1>");
%></code></pre>
<p><strong>脚本片段的再实现</strong></p>
<pre class=" language-jsp"><code class="language-jsp"><%--JSP脚本片段--%>
<%
int sum = 0;
for (int i= 1;i<=100;i++){
    sum += i;
}
out.println("<h1>Sum="+sum+"</h1>");
%>

<%
int x = 10;
out.println(x);
%>
<p>这是一个JSP文档</p>
<%
int y = 2;
out.println(y);
%>

<hr>

<%--在代码中嵌入HTML元素--%>
<%
for (int i = 0; i < 5; i++) {
    %>
<h1>Hello,World <%=i%></h1>
<%
}
%></code></pre>
<h5 id="JSP声明"><a href="#JSP声明" class="headerlink" title="JSP声明"></a>JSP声明</h5><pre class=" language-jsp"><code class="language-jsp"><%!
    static {
    System.out.println("Loading Servlet!");
}
private int globalVar = 0;

public void kuang(){
    System.out.println("进入了方法Kuang！");
}
%></code></pre>
<p>JSP 声明：会被编译到JSP生成Java的类中！其他的，会被生成到_jspService方法中！</p>
<p>在JSP中，嵌入Java代码即可！</p>
<pre class=" language-jsp"><code class="language-jsp"><%%>  //片段
<%=%>  //表达式
<%!%>  //声明
<%--这是JSP的注释--%>
<!--这是HTML的注释--></code></pre>
<p>JSP的注释，不会在客户端显示，HTML的会！</p>
<h4 id="8-4、JSP指令"><a href="#8-4、JSP指令" class="headerlink" title="8.4、JSP指令"></a>8.4、JSP指令</h4><pre class=" language-jsp"><code class="language-jsp"><%@page args.... %>   可定制页面，如错误页面404、500等等
<%@include args.... %>

<%--@include会将两个页面合而为一,这种方法不太推荐--%>
<%@include file="common/header.jsp"%>
<h1>网页主体</h1>
<%@include file="common/footer.jsp"%>

<%--JSP标签--%>
<%--jsp:include：拼接页面，本质还是三个，推荐使用--%>
<jsp:include page="/common/header.jsp"/>
<h1>网页主体</h1>
<jsp:include page="/common/footer.jsp"/>            </code></pre>
<h4 id="8-5、9大内置对象"><a href="#8-5、9大内置对象" class="headerlink" title="8.5、9大内置对象"></a>8.5、9大内置对象</h4><ul>
<li>PageContext   存东西</li>
<li>Request     存东西</li>
<li>Response</li>
<li>Session    存东西</li>
<li>Application （ServletContext） 存东西</li>
<li>Config （ServletConfig）</li>
<li>out</li>
<li>page （几乎不用）</li>
<li>exception</li>
</ul>
<p>作用域：</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>内置对象<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">%</span>
    pageContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name1"</span><span class="token punctuation">,</span><span class="token string">"琴江1号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//保存的数据只在一个页面中有效</span>
    request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name2"</span><span class="token punctuation">,</span><span class="token string">"琴江2号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//保存的数据只在一次请求中有效，请求转发会携带这个数据</span>
    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name3"</span><span class="token punctuation">,</span><span class="token string">"琴江3号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//保存的数据只在一个会话中有效，从打开浏览器到关闭浏览器</span>
    application<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name4"</span><span class="token punctuation">,</span><span class="token string">"琴江4号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//保存的数据在服务器中有效，从打开服务器到关闭服务器</span>
<span class="token operator">%</span><span class="token operator">></span></code></pre>
<p>request :客户端向服务器发送请求，产生的数据，用户看完就没用了，比如：新闻，用户看完就没用了！</p>
<p>session：客户端向服务器发送请求，产生的数据，用户看完一会还有用，比如：购物车；</p>
<p>application：客户端向服务器发送请求，产生的数据，一个用户用完了，其他用户还可能使用，比如：聊天数据；</p>
<p><img src="JavaWeb.assets/image-20210114231018450.png" alt="image-20210114231018450" loading="lazy"></p>
<h4 id="8-6、JSP标签、JSTL标签、EL表达式"><a href="#8-6、JSP标签、JSTL标签、EL表达式" class="headerlink" title="8.6、JSP标签、JSTL标签、EL表达式"></a>8.6、JSP标签、JSTL标签、EL表达式</h4><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--JSTL表达式依赖--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp.jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>
<p>EL表达式：${}</p>
<ul>
<li><strong>获取数据</strong></li>
<li><strong>执行运算</strong></li>
<li><strong>获取web开发的常用对象</strong></li>
<li><del>调用Java方法</del></li>
</ul>
<p><strong>JSP标签：</strong></p>
<pre class=" language-jsp"><code class="language-jsp"><%--<jsp:include --%>
<%--
http://localhost:8080/jsptag.jsp?name=kuangshen&age=12
--%>
<jsp:forward page="/jsptag2.jsp">
    <jsp:param name="name" value="kuangshen"/>
    <jsp:param name="age" value="12"/>
</jsp:forward></code></pre>
<p><strong>JSTL 标签</strong></p>
<p>JSTL标签库的使用就是为了弥补HTML标签的不足，它自定义许多标签，可以供我们使用，标签的功能和java代码一样！</p>
<p><strong>核心标签</strong>（掌握部分）</p>
<p><img src="JavaWeb.assets/image-20210114233017025.png" alt="image-20210114233017025" loading="lazy"></p>
<p><strong>JSTL标签库使用步骤：</strong></p>
<ul>
<li>引入对应的taglib</li>
<li>使用其中的方法</li>
</ul>
<p>c:if</p>
<pre class=" language-jsp"><code class="language-jsp"><%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%--引入JSTL核心标签库，我们才能使用JSTL标签--%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>Title</title>
</head>
<body>
<h4>if测试</h4>
<hr>
<form action="coreif.jsp" method="get">
    <%--
    EL表达式获取表单中的数据
    ${param.参数名}
    --%>
    <input type="text" name="username" value="${param.username}">
    <input type="submit" value="登录">
</form>

<%--判断如果提交的用户名是管理员，则登录成功--%>
<c:if test="${param.username=='admin'}" var="isAdmin">
    <c:out value="管理员欢迎您！"/>
</c:if>
<c:out value="${isAdmin}"/>

</body>
</html></code></pre>
<p>c:choose  c:when</p>
<pre class=" language-jsp"><code class="language-jsp"><body>
<%--定义一个变量score，值为85--%>
<c:set var="score" value="85"/>
<c:choose>
    <c:when test="${score>=90}">
        你的成绩为优秀
    </c:when>
    <c:when test="${score>=80}">
        你的成绩为良好
    </c:when>
    <c:when test="${score<80}">
        你的成绩为及格
    </c:when>
</c:choose>
</body></code></pre>
<p>c:foreach</p>
<pre class=" language-jsp"><code class="language-jsp"><%
    ArrayList<String> peoples = new ArrayList<>();
    peoples.add("张三");
    peoples.add("李四");
    peoples.add("王五");
    peoples.add("赵六");
    request.setAttribute("list",peoples);
%>
<%--var,每一次遍历出来的变量
items,要遍历的对象
begin，哪里开始
end，哪里结束
step，步长--%>
<c:forEach var="people" items="${list}">
    <c:out value="${people}"/> <br>

</c:forEach></code></pre>
<p>格式化标签、SQL标签、XML标签（不用看）</p>
<h3 id="9、JavaBean"><a href="#9、JavaBean" class="headerlink" title="9、JavaBean"></a>9、JavaBean</h3><p>实体类，符合一定规范编写的Java类，不是一种技术，而是一种规范</p>
<p>JavaBean有特定的写法：</p>
<ul>
<li>必须要有一个无参构造</li>
<li>属性必须私有化</li>
<li>必须有对应的get/set方法；</li>
</ul>
<p>一般用来和数据库的字段做映射  ORM</p>
<p>ORM：对象关系映射</p>
<ul>
<li>表——&gt;类</li>
<li>字段——&gt;属性</li>
<li>行记录——&gt;对象</li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
<th>address</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>琴江1号</td>
<td>3</td>
<td>西安</td>
</tr>
<tr>
<td>2</td>
<td>琴江2号</td>
<td>18</td>
<td>西安</td>
</tr>
<tr>
<td>3</td>
<td>琴江3号</td>
<td>100</td>
<td>西安</td>
</tr>
</tbody></table>
<pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">People</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"琴江1号"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"西安"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"琴江2号"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">"西安"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"琴江3号"</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"西安"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>经常碰到：java: 错误: 不支持发行版本 5  错误</p>
<p>解决办法：<a href="https://www.codeprj.com/blog/b2ed1b1.html" target="_blank" rel="noopener">https://www.codeprj.com/blog/b2ed1b1.html</a></p>
<h3 id="10、MVC三层架构"><a href="#10、MVC三层架构" class="headerlink" title="10、MVC三层架构"></a>10、MVC三层架构</h3><p>什么是MVC：Model  view  Controller   模型  视图  控制器</p>
<h4 id="10-1、早些年"><a href="#10-1、早些年" class="headerlink" title="10.1、早些年"></a>10.1、早些年</h4><p><img src="JavaWeb.assets/image-20210117150922513.png" alt="image-20210117150922513" loading="lazy"></p>
<p>用户直接访问控制层，控制层就可以直接操作数据库；</p>
<pre class=" language-java"><code class="language-java">servlet<span class="token operator">--</span>CRUD<span class="token operator">--</span><span class="token operator">></span>数据库
弊端：程序十分臃肿，不利于维护
Servlet的代码需要：处理请求、响应、视图跳转、处理JDBC、处理业务代码、处理逻辑代码

架构：没有什么是加一层解决不了的！
</code></pre>
<h4 id="10-2、MVC三层架构"><a href="#10-2、MVC三层架构" class="headerlink" title="10.2、MVC三层架构"></a>10.2、MVC三层架构</h4><p><img src="JavaWeb.assets/image-20210117151753341.png" alt="image-20210117151753341" loading="lazy"></p>
<p>Model</p>
<ul>
<li>业务处理：业务逻辑（Service）</li>
<li>数据持久层：CRUD （Dao）</li>
</ul>
<p>View</p>
<ul>
<li>展示数据</li>
<li>提供链接发起Servlet请求（a，form，img….)</li>
</ul>
<p>Controller</p>
<ul>
<li>接受用户的请求：（req：请求参数、Session信息…)</li>
<li>交给业务层处理对应的代码</li>
<li>控制视图层的跳转</li>
</ul>
<p>用登录为例：</p>
<pre class=" language-java"><code class="language-java">登录<span class="token operator">--</span><span class="token operator">-</span><span class="token operator">></span>接受用户的登录请求<span class="token operator">--</span><span class="token operator">></span>处理用户的请求（获取用户登录的参数，username，password）<span class="token operator">--</span><span class="token operator">></span>交给业务层处理登录业务（判断用户名密码是否正确）<span class="token operator">--</span><span class="token operator">></span>Dao层查询用户名和密码是否正确<span class="token operator">--</span><span class="token operator">></span>数据库</code></pre>
<h3 id="11、Filter（重点）"><a href="#11、Filter（重点）" class="headerlink" title="11、Filter（重点）"></a>11、Filter（重点）</h3><p>Filter：过滤器，用来过滤网站的数据；</p>
<ul>
<li>处理中文乱码</li>
<li>登录验证….</li>
</ul>
<p><img src="JavaWeb.assets/image-20210117153030831.png" alt="image-20210117153030831" loading="lazy"></p>
<p>Filter开发步骤：</p>
<ol>
<li><p>导包</p>
</li>
<li><p>编写过滤器</p>
<ol>
<li><p>导包不要错</p>
<p><img src="JavaWeb.assets/image-20210117154227352.png" alt="image-20210117154227352" loading="lazy"></p>
</li>
<li><p>实现Filter接口，重写对应的方法即可！</p>
</li>
</ol>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">//初始化  web服务器启动，就已经初始化了，随时等待过滤对象出现！</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>FilterConfig filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//chain  链</span>
    <span class="token comment" spellcheck="true">/*
    1. 过滤中的所有代码，在过滤特定请求的时候都会执行
    2. 必须要让过滤器继续通行
    filterChain.doFilter(request,response);
    * */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest request<span class="token punctuation">,</span> ServletResponse response<span class="token punctuation">,</span> FilterChain filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter执行前"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//让我们的请求继续走，如果不写，程序到这里就会被拦截停止！</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter执行后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//销毁  web服务器关闭的时候，过滤器会销毁</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CharacterEncodingFilter销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ol start="3">
<li><p>在web.xml中配置Filter</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.zhou.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!--只要是 /servlet的任何请求，都会经过这个过滤器--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/servlet/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!--&lt;url-pattern>/*&lt;/url-pattern>--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span></code></pre>
</li>
</ol>
</li>
</ol>
<h3 id="12、监听器"><a href="#12、监听器" class="headerlink" title="12、监听器"></a>12、监听器</h3><p>实现一个监听器的接口；（有N种）</p>
<ol>
<li><p>编写一个监听器</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//统计网站在线人数：统计session</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OnlineCountListener</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionListener</span> <span class="token punctuation">{</span>

</code></pre>
</li>
</ol>
<pre><code>   //创建session监听，看你的一举一动
   //一旦创建Session就会触发一次这个事件！
   @Override
   public void sessionCreated(HttpSessionEvent httpSessionEvent) {
       ServletContext ctx = httpSessionEvent.getSession().getServletContext();
       System.out.println(httpSessionEvent.getSession().getId());
       Integer onlineCount = (Integer) ctx.getAttribute(&quot;OnlineCount&quot;);

       if (onlineCount==null){
           onlineCount =1;
       }else{
           onlineCount++;
       }
       ctx.setAttribute(&quot;OnlineCount&quot;,onlineCount);
   }

   //销毁session监听
   @Override
   public void sessionDestroyed(HttpSessionEvent httpSessionEvent) {
       ServletContext ctx = httpSessionEvent.getSession().getServletContext();
       Integer onlineCount = (Integer) ctx.getAttribute(&quot;OnlineCount&quot;);

       if (onlineCount==null){
           onlineCount =0;
       }else{
           onlineCount--;
       }
       ctx.setAttribute(&quot;OnlineCount&quot;,onlineCount);

   }

   /*
   Session销毁
   1. 手动销毁 getSession().invalidate();
   2. 自动销毁: 设置自动过期时间
   */</code></pre><p>   }</p>
<pre><code>


2. web.xml中注册监听器

   ```xml
   //注册监听器
   &lt;listener&gt;
       &lt;listener-class&gt;com.zhou.listener.OnlineCountListener&lt;/listener-class&gt;
   &lt;/listener&gt;</code></pre><ol start="3">
<li>看情况是否使用！</li>
</ol>
<h3 id="13、过滤器、监听器常见应用"><a href="#13、过滤器、监听器常见应用" class="headerlink" title="13、过滤器、监听器常见应用"></a>13、过滤器、监听器常见应用</h3><p><strong>监听器：GUI编程中经常使用；</strong></p>
<p>过滤器示例：<strong>用户登录之后才能进入主页！用户注销后就不能进入主页了！</strong></p>
<ol>
<li>用户登录之后，向Session中放入用户的数据；</li>
<li>进入主页的时候要判断用户是否已经登录；要求：在过滤器中实现！</li>
</ol>
<p>流程图大概如下：</p>
<p><img src="JavaWeb.assets/x.jpg" alt="x" loading="lazy"></p>
<pre class=" language-jsp"><code class="language-jsp"><!--login.jsp-->
<h1>登录</h1>
<form action="/servlet/login" method="post">
    <input type="text" name="username">
    <input type="submit">
</form></code></pre>
<pre class=" language-jsp"><code class="language-jsp"><!--success.jsp-->
<h1>主页</h1>
<p><a href="/servlet/logout">注销</a></p></code></pre>
<pre class=" language-jsp"><code class="language-jsp"><!--error.jsp-->
<h1>错误</h1>
<h3>没有权限，用户名错误</h3>
<a href="/login.jsp">返回登录页面</a></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//LoginServlet</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//获取前端请求的参数</span>
    String username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//登录成功,把用户信息放到session中</span>
        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"USER_SESSION"</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/sys/success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//登录失败</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/error.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//LogoutServlet</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//注销操作：把Session中的“USERSESSION”参数移除</span>
    Object user_session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"USER_SESSION"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user_session<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//如果USER_SESSION不为空，说明处于登录状态</span>
        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"USER_SESSION"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//SysFilter拦截器</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest req<span class="token punctuation">,</span> ServletResponse resp<span class="token punctuation">,</span> FilterChain filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//ServletRequest无法获取Session, 因此强转为HttpServletRequest</span>
    HttpServletRequest request <span class="token operator">=</span> <span class="token punctuation">(</span>HttpServletRequest<span class="token punctuation">)</span> req<span class="token punctuation">;</span>
    HttpServletResponse response <span class="token operator">=</span> <span class="token punctuation">(</span>HttpServletResponse<span class="token punctuation">)</span> resp<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"USER_SESSION"</span><span class="token punctuation">)</span> <span class="token operator">==</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/error.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="14、JDBC"><a href="#14、JDBC" class="headerlink" title="14、JDBC"></a>14、JDBC</h3><p>什么是JDBC：java连接数据库！</p>
<p>。。。略——详见MySQL篇。</p>
<p>单元测试：junit  不用main方法也能执行普通方法</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>@Test注解只有在方法上有效，只要加了这个注解的方法，就可以直接运行！</p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">如果喜欢就点赞or赞赏</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="https://cdn.jsdelivr.net/gh/xf-zhou/CDN/img/donate/alipay-qrcode.jpg" target="_blank" rel="noopener"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/xf-zhou/CDN/img/donate/alipay-qrcode.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a href="https://cdn.jsdelivr.net/gh/xf-zhou/CDN/img/donate/wechatpay-qrcode.png" target="_blank" rel="noopener"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/xf-zhou/CDN/img/donate/wechatpay-qrcode.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>xfzhou</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://xfzhou95.com/2020/11/27/JavaWeb/" title="JavaWeb">https://xfzhou95.com/2020/11/27/JavaWeb/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/01/15/MySQL/" rel="prev" title="MySQL"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">MySQL</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2020/11/27/JavaScript/" rel="next" title="JavaScript"><span class="post-nav-text">JavaScript</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>点击按钮跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+JavaWeb" target="_blank" rel="noopener">GitHub Issues</a></div><div id="valine-container"></div><script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script><script>function initValine() {
  const valineConfig = {"enable":true,"appId":"Ly4ohwKW5DOjAswrfhXkSbDp-gzGzoHsz","appKey":"7JcswEnhHmu9mlhqlDVWRzon","placeholder":"说点什么","avatar":null,"meta":["nick","mail","link"],"pageSize":10,"visitor":true,"recordIP":true,"enableQQ":true,"requiredFields":["nick","mail"],"highlight":true,"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = window.location.pathname
  new Valine(valineConfig)
}
setTimeout(initValine, 1000)</script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></span><span class="author"> xfzhou</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v4.2.1</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v0.9.0</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2019-06-19T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>